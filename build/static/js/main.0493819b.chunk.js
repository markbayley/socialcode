(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{458:function(e,t,a){e.exports=a(769)},475:function(e,t,a){},769:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(73),c=a.n(o),l=(a(463),a(29)),i=a(37),s=a.n(i),u=(a(475),a(22)),m=a(23),p=a(25),d=a(24),h=a(26),E=a(11),f=a.n(E),v=a(21),b=a(123),g=a(41),y=a(797),O=a(780),w=a(795),j=a(788),C=a(232),k=a(107),x=a(789),I=a(792),S=a(423),L=a(30),A=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.attendee;return r.a.createElement(x.a.Item,null,r.a.createElement(S.a,{as:L.b,to:"/profile/".concat(e.id),size:"mini",circular:!0,src:e.photoURL}))}}]),t}(n.Component),R=a(771),N=a(35),F=a(50),T=function(e){if(e)return Object.entries(e).map(function(e){return Object.assign({},e[1],{id:e[0]})})},P=function(e,t,a){return Object(F.a)({},a,{hostUid:e.uid,hostedBy:e.displayName,hostPhotoURL:t||"/assets/user.png",created:new Date,attendees:Object(N.a)({},e.uid,{going:!0,joinDate:new Date,photoURL:t||"/assets/user.png",displayName:e.displayName,host:!0})})},U=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.event;return r.a.createElement(w.a.Group,null,r.a.createElement(w.a,null,r.a.createElement(j.a.Group,null,r.a.createElement(j.a,null,r.a.createElement(j.a.Image,{size:"tiny",circular:!0,src:e.hostPhotoURL}),r.a.createElement(j.a.Content,null,r.a.createElement(j.a.Header,{as:L.b,to:"/events/".concat(e.id)},e.title),r.a.createElement(j.a.Description,null,"Hosted by "," ",r.a.createElement(L.b,{to:"/profile/".concat(e.hostUid)},e.hostedBy)," "),e.cancelled&&r.a.createElement(C.a,{style:{top:"-50px",left:"82%"},pointing:"left",color:"red",content:"This event has been cancelled"}))))),r.a.createElement(w.a,null,r.a.createElement("span",null,r.a.createElement(k.a,{name:"clock"}),Object(R.default)(e.date.toDate(),"EEEE do LLL")," at"," ",Object(R.default)(e.date.toDate(),"h:mm a"),"  |",r.a.createElement(k.a,{name:"marker"})," ",e.venue)),r.a.createElement(w.a,{secondary:!0},r.a.createElement(x.a,{horizontal:!0},e.attendees&&T(e.attendees).map(function(e){return r.a.createElement(A,{key:e.id,attendee:e})}))),r.a.createElement(w.a,{clearing:!0},r.a.createElement("span",null,e.description),r.a.createElement(I.a,{as:L.b,to:"/events/".concat(e.id),color:"teal",floated:"right",content:"View"})))}}]),t}(n.Component),M=a(400),_=a.n(M),D=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.events,a=e.getNextEvents,o=e.loading,c=e.moreEvents;return r.a.createElement(n.Fragment,null,t&&0!==t.length&&r.a.createElement(_.a,{pageStart:0,loadMore:a,hasMore:!o&&c,initialLoad:!1},t&&t.map(function(e){return r.a.createElement(U,{key:e.id,event:e})})))}}]),t}(n.Component),z=a(239),B=a.n(z);a(638),a(641),a(644),a(773);B.a.initializeApp({apiKey:"AIzaSyD2EWbD-5WlLQt_bUGxLy0AenmWlbS62uQ",authDomain:"revents-260112.firebaseapp.com",databaseURL:"https://revents-260112.firebaseio.com",projectId:"revents-260112",storageBucket:"revents-260112.appspot.com",messagingSenderId:"483881137122",appId:"1:483881137122:web:132145b052998968693fbb"}),B.a.firestore();var G=B.a,H=a(794),V=function(e){var t=e.inverted,a=void 0===t||t;return r.a.createElement(H.a,{inverted:a,active:!0},r.a.createElement(O.a,{content:"Loading..."}))},Y=a(796),q=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,{attached:"top",content:"Recent Activity"}),r.a.createElement(w.a,{attached:!0},r.a.createElement("p",null,"3 new members joined 'React Meetup'..."),r.a.createElement("p",null,"1 member sent you a message")))},W={getEventsForDashboard:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n){var r,o,c,l,i,s,u,m,p;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=new Date,o=G.firestore(),c=o.collection("events"),t.prev=3,a({type:"ASYNC_ACTION_START"}),t.t0=e,!t.t0){t.next=10;break}return t.next=9,o.collection("events").doc(e.id).get();case 9:t.t0=t.sent;case 10:return l=t.t0,i=e?c.where("date",">=",r).orderBy("date").startAfter(l).limit(2):c.where("date",">=",r).orderBy("date").limit(2),t.next=14,i.get();case 14:if(0!==(s=t.sent).docs.length){t.next=18;break}return a({type:"ASYNC_ACTION_FINISH"}),t.abrupt("return",s);case 18:for(u=[],m=0;m<s.docs.length;m++)p=Object(F.a)({},s.docs[m].data(),{id:s.docs[m].id}),u.push(p);return a({type:"FETCH_EVENTS",payload:{events:u}}),a({type:"ASYNC_ACTION_FINISH"}),t.abrupt("return",s);case 25:t.prev=25,t.t1=t.catch(3),console.log(t.t1),a({type:"ASYNC_ACTION_ERROR"});case 29:case"end":return t.stop()}},t,null,[[3,25]])}));return function(e,a){return t.apply(this,arguments)}}()}},K=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={moreEvents:!1,loadingInitial:!0,loadedEvents:[]},a.componentDidUpdate=function(e){a.props.events!==e.events&&a.setState({loadedEvents:[].concat(Object(b.a)(a.state.loadedEvents),Object(b.a)(a.props.events))})},a.getNextEvents=Object(v.a)(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.events,n=t&&t[t.length-1],console.log(n),e.next=5,a.props.getEventsForDashboard(n);case 5:r=e.sent,console.log(r),r&&r.docs&&r.docs.length<=1&&a.setState({moreEvents:!1});case 8:case"end":return e.stop()}},e)})),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getEventsForDashboard();case 2:t=e.sent,console.log(t),t&&t.docs&&t.docs.length>1&&this.setState({moreEvents:!0,loadingInitial:!1});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.loading,t=this.state,a=t.moreEvents,n=t.loadedEvents;return this.state.loadingInitial?r.a.createElement(V,null):r.a.createElement(y.a,null,r.a.createElement(y.a.Column,{width:10},r.a.createElement(D,{loading:e,events:n,moreEvents:a,getNextEvents:this.getNextEvents})),r.a.createElement(y.a.Column,{width:6},r.a.createElement(q,null)),r.a.createElement(y.a.Column,{width:10},r.a.createElement(O.a,{active:e})))}}]),t}(n.Component),Q=Object(l.connect)(function(e){return{events:e.events,loading:e.async.loading}},W)(Object(g.firestoreConnect)([{collection:"events"}])(K)),J=a(793),Z=a(781),$=a(45),X=function(e){var t=e.signIn,a=e.register;return r.a.createElement(J.a.Item,{position:"right"},r.a.createElement(I.a,{onClick:t,basic:!0,inverted:!0,content:"Login"}),r.a.createElement(I.a,{onClick:a,basic:!0,inverted:!0,content:"Register",style:{marginLeft:"0.5em"}}))},ee=a(178),te=function(e){var t=e.signOut,a=e.profile,n=e.auth;return r.a.createElement(J.a.Item,{position:"right"},r.a.createElement(S.a,{avatar:!0,spaced:"right",src:a.photoURL||"/assets/user.png"}),r.a.createElement(ee.a,{pointing:"top right",text:a.displayName},r.a.createElement(ee.a.Menu,null,r.a.createElement(ee.a.Item,{text:"Create Event",icon:"plus"}),r.a.createElement(ee.a.Item,{text:"My Events",icon:"calendar"}),r.a.createElement(ee.a.Item,{text:"My Network",icon:"users"}),r.a.createElement(ee.a.Item,{as:L.b,to:"/profile/".concat(n.uid),text:"My Profile",icon:"user"}),r.a.createElement(ee.a.Item,{as:L.b,to:"/settings",text:"Settings",icon:"settings"}),r.a.createElement(ee.a.Item,{onClick:t,text:"Sign Out",icon:"power"}))))},ae=function(e,t){return{type:"MODAL_OPEN",payload:{modalType:e,modalProps:t}}},ne=function(){return{type:"MODAL_CLOSE"}},re={openModal:ae},oe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSignIn=function(){a.props.openModal("LoginModal")},a.handleRegister=function(){a.props.openModal("RegisterModal")},a.handleSignOut=function(){a.props.firebase.logout(),a.props.history.push("/")},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.profile,o=t.isLoaded&&!t.isEmpty;return r.a.createElement(J.a,{inverted:!0,fixed:"top"},r.a.createElement(Z.a,null,r.a.createElement(J.a.Item,{as:L.c,exact:!0,to:"/",header:!0},r.a.createElement("img",{src:"/assets/logo.png",alt:"logo"}),"Re-vents"),r.a.createElement(J.a.Item,{as:L.c,exact:!0,to:"/events",name:"Events"}),o&&r.a.createElement(n.Fragment,null,r.a.createElement(J.a.Item,{as:L.c,to:"/people",name:"People"}),r.a.createElement(J.a.Item,{as:L.c,to:"/test",name:"Test"}),r.a.createElement(J.a.Item,null,r.a.createElement(I.a,{as:L.b,to:"/createEvent",floated:"right",positive:!0,inverted:!0,content:"Create Event"}))),o?r.a.createElement(te,{signOut:this.handleSignOut,profile:a,auth:t}):r.a.createElement(X,{signIn:this.handleSignIn,register:this.handleRegister})))}}]),t}(n.Component),ce=Object($.g)(Object(g.withFirebase)(Object(l.connect)(function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}},re)(oe))),le={filter:"brightness(30%)"},ie={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},se=function(e){var t=e.event,a=e.isHost,o=e.isGoing,c=e.goingToEvent,l=e.cancelGoingToEvent;return r.a.createElement(w.a.Group,null,r.a.createElement(w.a,{basic:!0,attached:"top",style:{padding:"0"}},r.a.createElement(S.a,{src:"/assets/categoryImages/".concat(t.category,".jpg"),fluid:!0,style:le}),r.a.createElement(w.a,{basic:!0,style:ie},r.a.createElement(j.a.Group,null,r.a.createElement(j.a,null,r.a.createElement(j.a.Content,null,r.a.createElement(Y.a,{size:"huge",content:t.title,style:{color:"white"}}),r.a.createElement("p",null,t.date&&Object(R.default)(t.date.toDate(),"EEEE do LLLL")),r.a.createElement("p",null,"Hosted by"," ",r.a.createElement("strong",null,r.a.createElement(L.b,{to:"/profile/".concat(t.hostUid),style:{color:"white"}},t.hostedBy)))))))),r.a.createElement(w.a,{attached:"bottom",clearing:!0},!a&&r.a.createElement(n.Fragment,null,o?r.a.createElement(I.a,{onClick:function(){return l(t)}},"Cancel My Place"):r.a.createElement(I.a,{onClick:function(){return c(t)},color:"teal"},"JOIN THIS EVENT")),a&&r.a.createElement(I.a,{as:L.b,to:"/manage/".concat(t.id),color:"orange",floated:"right"},"Manage Event")))},ue=a(153),me=a(220),pe=a.n(me),de=function(){return r.a.createElement(k.a,{name:"marker",size:"big",color:"red"})},he=function(e){var t=e.lat,a=e.lng;return r.a.createElement(w.a,{attached:"bottom",style:{padding:0}},r.a.createElement("div",{style:{height:"300px",width:"100%"}},r.a.createElement(pe.a,{bootstrapURLKeys:{key:"AIzaSyDIpgc0n_n_YzK7f4S1wJqB3_Rk5CPhQIQ"},defaultCenter:{lat:t,lng:a},defaultZoom:14},r.a.createElement(de,{lat:t,lng:a}))))},Ee=function(e){var t=e.event,a=Object(n.useState)(!1),o=Object(ue.a)(a,2),c=o[0],l=o[1];return r.a.createElement(w.a.Group,null,r.a.createElement(w.a,{attached:"top"},r.a.createElement(y.a,null,r.a.createElement(y.a.Column,{width:1},r.a.createElement(k.a,{size:"large",color:"teal",name:"info"})),r.a.createElement(y.a.Column,{width:15},r.a.createElement("p",null,t.description)))),r.a.createElement(w.a,{attached:!0},r.a.createElement(y.a,{verticalAlign:"middle"},r.a.createElement(y.a.Column,{width:1},r.a.createElement(k.a,{name:"calendar",size:"large",color:"teal"})),r.a.createElement(y.a.Column,{width:15},t.date&&r.a.createElement("span",null,Object(R.default)(t.date.toDate(),"EEEE do LLL")," at"," ",Object(R.default)(t.date.toDate(),"h:mm a"))))),r.a.createElement(w.a,{attached:!0},r.a.createElement(y.a,{verticalAlign:"middle"},r.a.createElement(y.a.Column,{width:1},r.a.createElement(k.a,{name:"marker",size:"large",color:"teal"})),r.a.createElement(y.a.Column,{width:11},r.a.createElement("span",null,t.venue)),r.a.createElement(y.a.Column,{width:4},r.a.createElement(I.a,{onClick:function(){return l(!c)},color:"teal",size:"tiny",content:c?"Hide map":"Show map"})))),c&&r.a.createElement(he,{lat:t.venueLatLng.lat,lng:t.venueLatLng.lng}))},fe=a(787),ve=a(784),be=a(396),ge=a(395),ye=function(e){var t=e.input,a=e.rows,n=(e.width,e.type),o=e.placeholder,c=e.meta,l=c.touched,i=c.error;return r.a.createElement(ve.a.Field,{error:l&&!!i},r.a.createElement("textarea",Object.assign({},t,{placeholder:o,type:n,rows:a})),l&&i&&r.a.createElement(C.a,{basic:!0,color:"red"},i))},Oe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleCommentSubmit=function(e){var t=a.props,n=t.addEventComment,r=t.reset,o=t.eventId,c=t.closeForm,l=t.parentId;n(o,e,l),r(),0!==l&&c()},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(ve.a,{onSubmit:this.props.handleSubmit(this.handleCommentSubmit)},r.a.createElement(be.a,{name:"comment",type:"text",component:ye,rows:2}),r.a.createElement(I.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0}))}}]),t}(n.Component),we=Object(ge.a)({Fields:"comment"})(Oe),je=a(791),Ce=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={showReplyForm:!1,selectedCommentId:null},a.handleOpenReplyForm=function(e){return function(){a.setState({showReplyForm:!0,selectedCommentId:e})}},a.handleCloseReplyForm=function(){a.setState({selectedCommentId:null,showReplyForm:!1})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.addEventComment,o=t.eventId,c=t.eventChat,l=this.state,i=l.showReplyForm,s=l.selectedCommentId;return r.a.createElement(n.Fragment,null,r.a.createElement(w.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(Y.a,null,"Chat about this event")),r.a.createElement(w.a,{attached:!0},r.a.createElement(fe.a.Group,null,c&&c.map(function(t){return r.a.createElement(fe.a,{key:t.id},r.a.createElement(fe.a.Avatar,{src:t.photoURL||"/assets/user.png"}),r.a.createElement(fe.a.Content,null,r.a.createElement(fe.a.Author,{as:L.b,to:"/profile/".concat(t.uid)},t.displayName),r.a.createElement(fe.a.Metadata,null,r.a.createElement("div",null,Object(je.a)(t.date,Date.now())," ago")),r.a.createElement(fe.a.Text,null,t.text),r.a.createElement(fe.a.Actions,null,r.a.createElement(fe.a.Action,{onClick:e.handleOpenReplyForm(t.id)},"Reply"),i&&s===t.id&&r.a.createElement(we,{addEventComment:a,eventId:o,form:"reply_".concat(t.id),closeForm:e.handleCloseReplyForm,parentId:t.id}))),t.childNodes&&t.childNodes.map(function(t){return r.a.createElement(fe.a.Group,{key:t.id},r.a.createElement(fe.a,null,r.a.createElement(fe.a.Avatar,{src:t.photoURL||"/assets/user.png"}),r.a.createElement(fe.a.Content,null,r.a.createElement(fe.a.Author,{as:L.b,to:"/profile/".concat(t.uid)},t.displayName),r.a.createElement(fe.a.Metadata,null,r.a.createElement("div",null,Object(je.a)(t.date,Date.now())," ago")),r.a.createElement(fe.a.Text,null,t.text),r.a.createElement(fe.a.Actions,null,r.a.createElement(fe.a.Action,{onClick:e.handleOpenReplyForm(t.id)},"Reply"),i&&s===t.id&&r.a.createElement(we,{addEventComment:a,eventId:o,form:"reply_".concat(t.id),closeForm:e.handleCloseReplyForm,parentId:t.parentId})))))}))})),r.a.createElement(we,{addEventComment:a,eventId:o,form:"newComment",parentId:0})))}}]),t}(n.Component),ke=function(e){var t=e.attendees;return r.a.createElement(n.Fragment,null,r.a.createElement(w.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},t&&t.length," ",t&&1===t.length?"Person":"People"," Going"),r.a.createElement(w.a,{attached:!0},r.a.createElement(j.a.Group,{divided:!0},t&&t.map(function(e){return r.a.createElement(j.a,{key:e.id,style:{position:"relative"}},!1,r.a.createElement(j.a.Image,{size:"tiny",src:e.photoURL}),r.a.createElement(j.a.Content,{verticalAlign:"middle"},r.a.createElement(j.a.Header,{as:"h3"},r.a.createElement(L.b,{to:"/profile/".concat(e.id)},e.displayName))))}))))},xe=a(32),Ie=a(234),Se=a(407),Le=a.n(Se),Ae={goingToEvent:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c,l,s,u,m,p;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=r.getFirestore,l=c(),s=o(),u=s.auth().currentUser,m=n().firebase.profile,p={going:!0,joinDate:l.FieldValue.serverTimestamp(),photoURL:m.photoURL||"/assets/user.png",displayName:m.displayName,host:!1},t.prev=6,t.next=9,l.update("events/".concat(e.id),Object(N.a)({},"attendees.".concat(u.uid),p));case 9:return t.next=11,l.set("event_attendee/".concat(e.id,"_").concat(u.uid),{eventId:e.id,userUid:u.uid,eventDate:e.date,host:!1});case 11:i.toastr.success("Success","You have signed up to the event"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(6),console.log(t.t0),i.toastr.error("Oops","Problem signing up to the event");case 18:case"end":return t.stop()}},t,null,[[6,14]])}));return function(e,a,n){return t.apply(this,arguments)}}()},cancelGoingToEvent:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c,l,s,u;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=r.getFirestore,l=c(),s=o(),u=s.auth().currentUser,t.prev=4,t.next=7,l.update("events/".concat(e.id),Object(N.a)({},"attendees.".concat(u.uid),l.FieldValue.delete()));case 7:return t.next=9,l.delete("event_attendee/".concat(e.id,"_").concat(u.uid));case 9:i.toastr.success("Success","You have removed yurself from the event"),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.log(t.t0),i.toastr.error("Oops","Something went wrong");case 16:case"end":return t.stop()}},t,null,[[4,12]])}));return function(e,a,n){return t.apply(this,arguments)}}()},addEventComment:function(e,t,a){return function(){var n=Object(v.a)(f.a.mark(function n(r,o,c){var l,s,u,m,p;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l=c.getFirebase,s=l(),u=o().firebase.profile,m=s.auth().currentUser,p={parentId:a,displayName:u.displayName,photoURL:u.photoURL||"/assets/user.png",uid:m.uid,text:t.comment,date:Date.now()},n.prev=5,n.next=8,s.push("event_chat/".concat(e),p);case 8:n.next=14;break;case 10:n.prev=10,n.t0=n.catch(5),console.log(n.t0),i.toastr.error("Oops","Problem adding comment");case 14:case"end":return n.stop()}},n,null,[[5,10]])}));return function(e,t,a){return n.apply(this,arguments)}}()}},Re=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark(function e(){var t,a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.firestore,n=t.match,e.next=3,a.setListener("events/".concat(n.params.id));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(v.a)(f.a.mark(function e(){var t,a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.firestore,n=t.match,e.next=3,a.unsetListener("events/".concat(n.params.id));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.event,a=e.auth,n=e.goingToEvent,o=e.cancelGoingToEvent,c=e.addEventComment,l=e.eventChat,i=t&&t.attendees&&T(t.attendees),s=t.hostUid===a.uid,u=i&&i.some(function(e){return e.id===a.uid}),m=!Object(g.isEmpty)(l)&&function(e){var t=Object.create(null);e.forEach(function(e){return t[e.id]=Object(F.a)({},e,{childNodes:[]})});var a=[];return e.forEach(function(e){e.parentId?t[e.parentId].childNodes.push(t[e.id]):a.push(t[e.id])}),a}(l);return r.a.createElement(y.a,null,r.a.createElement(y.a.Column,{width:10},r.a.createElement(se,{event:t,isHost:s,isGoing:u,goingToEvent:n,cancelGoingToEvent:o}),r.a.createElement(Ee,{event:t}),r.a.createElement(Ce,{addEventComment:c,eventId:t.id,eventChat:m})),r.a.createElement(y.a.Column,{width:6},r.a.createElement(ke,{attendees:i,eventId:t.id})))}}]),t}(n.Component),Ne=Object(xe.compose)(g.withFirestore,Object(l.connect)(function(e,t){var a=t.match.params.id,n={};return e.firestore.ordered.events&&e.firestore.ordered.events.length>0&&(n=e.firestore.ordered.events.filter(function(e){return e.id===a})[0]||{}),{event:n,auth:e.firebase.auth,eventChat:!Object(g.isEmpty)(e.firebase.data.event_chat)&&T(e.firebase.data.event_chat[t.match.params.id])}},Ae),Object(g.firebaseConnect)(function(e){return["event_chat/".concat(e.match.params.id)]}))(Re),Fe=function(){return r.a.createElement(y.a,null,r.a.createElement(y.a.Column,{width:16},r.a.createElement(w.a,null,r.a.createElement(x.a.Item,null,r.a.createElement(S.a,{as:"a",size:"large",circular:!0,src:"https://randomuser.me/api/portraits/men/20.jpg"})),r.a.createElement(j.a.Content,null,r.a.createElement(j.a.Header,{as:"h3"},"Bruce")))),r.a.createElement(y.a.Column,{width:12},r.a.createElement(w.a,null,r.a.createElement("h3",null,"About Me"))))},Te=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(J.a,{vertical:!0},r.a.createElement(Y.a,{icon:"user",attached:!0,inverted:!0,color:"grey",content:"Profile"}),r.a.createElement(J.a.Item,{as:L.c,to:"/settings/basic"},"Basics"),r.a.createElement(J.a.Item,{as:L.c,to:"/settings/about"},"About Me"),r.a.createElement(J.a.Item,{as:L.c,to:"/settings/photos"},"My Photos")),r.a.createElement(J.a,{vertical:!0},r.a.createElement(Y.a,{icon:"settings",attached:!0,inverted:!0,color:"grey",content:"Account"}),r.a.createElement(J.a.Item,{as:L.c,to:"/settings/account"},"My Account")))},Pe=a(783),Ue=a(408),Me=a.n(Ue),_e=(a(675),function(e){var t=e.input,a=t.value,n=t.onChange,o=t.onBlur,c=(e.width,e.placeholder),l=e.meta,i=l.touched,s=l.error,u=Object(Ie.a)(e,["input","width","placeholder","meta"]);return r.a.createElement(ve.a.Field,{error:i&&!!s},r.a.createElement(Me.a,Object.assign({},u,{placeholderText:c,selected:a?"[object Date]"!==Object.prototype.toString.call(a)?a.toDate():a:null,onChange:n,onBlur:function(e,t){return o(t)},onChangeRaw:function(e){return e.preventDefault()}})),i&&s&&r.a.createElement(C.a,{basic:!0,color:"red"},s))}),De=a(59),ze=a.n(De),Be=function(e){var t=e.input,a=t.value,n=t.onChange,o=t.onBlur,c=(e.width,e.options),l=e.placeholder,i=e.onSelect,s=e.meta,u=s.touched,m=s.error;return r.a.createElement(ze.a,{value:a,onChange:n,searchOptions:c,onSelect:i},function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,c=e.loading;return r.a.createElement(ve.a.Field,{error:u&&!!m},r.a.createElement("input",Object.assign({placeholder:l},t({placeholder:l,onBlur:o}))),u&&m&&r.a.createElement(C.a,{basic:!0,color:"red"},m),a.length>0&&r.a.createElement(w.a,{style:{marginTop:0,position:"absolute",zIndex:1e3,width:"100%"}},c&&r.a.createElement("div",null,"Loading..."),r.a.createElement(x.a,{selection:!0},a.map(function(e){return r.a.createElement(x.a.Item,n(e),r.a.createElement(x.a.Header,null,e.formattedSuggestion.mainText),r.a.createElement(x.a.Description,null,e.formattedSuggestion.secondaryText))}))))})},Ge=function(e){var t=e.input,a=e.width,n=e.type,o=e.placeholder,c=e.meta,l=c.touched,i=c.error;return r.a.createElement(ve.a.Field,{error:l&&!!i,width:a},r.a.createElement("input",Object.assign({},t,{placeholder:o,type:n})),l&&i&&r.a.createElement(C.a,{basic:!0,color:"red"},i))},He=function(e){var t=e.input,a=(e.width,e.type),n=e.label;return r.a.createElement(ve.a.Field,null,r.a.createElement("div",{className:"ui radio"},r.a.createElement("input",Object.assign({},t,{type:a}))," ",r.a.createElement("label",null,n)))},Ve=a(290),Ye=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pristine,a=e.submitting,n=e.handleSubmit,o=e.updateProfile;return r.a.createElement(w.a,null,r.a.createElement(Y.a,{dividing:!0,size:"large",content:"Basics"}),r.a.createElement(ve.a,{onSubmit:n(o)},r.a.createElement(be.a,{width:8,name:"displayName",type:"text",component:Ge,placeholder:"Known As"}),r.a.createElement(ve.a.Group,{inline:!0},r.a.createElement("label",null,"Gender: "),r.a.createElement(be.a,{name:"gender",type:"radio",value:"male",label:"Male",component:He}),r.a.createElement(be.a,{name:"gender",type:"radio",value:"female",label:"Female",component:He})),r.a.createElement(be.a,{width:8,name:"dateofbirth",component:_e,placeholder:"Date of Birth",dateFormat:"dd LLL yyyy",showYearDropdown:!0,showMonthDropdown:!0,dropdownMode:"select",maxDate:Object(Ve.default)(new Date,-18)}),r.a.createElement(be.a,{name:"city",placeholder:"Home Town",options:{types:["(cities)"]},label:"Female",component:Be,width:8}),r.a.createElement(Pe.a,null),r.a.createElement(I.a,{disabled:t||a,size:"large",positive:!0,content:"Update Profile"})))}}]),t}(n.Component),qe=Object(ge.a)({form:"userProfile",enableReinitialize:!0,destroyOnUnmount:!1})(Ye),We=a(782),Ke=function(e){var t=e.input,a=(e.type,e.placeholder),n=e.multiple,o=e.options,c=e.meta,l=c.touched,i=c.error;return r.a.createElement(ve.a.Field,{error:l&&!!i},r.a.createElement(We.a,{value:t.value||null,onChange:function(e,a){return t.onChange(a.value)},placeholder:a,options:o,multiple:n}),l&&i&&r.a.createElement(C.a,{basic:!0,color:"red"},i))},Qe=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],Je=Object(ge.a)({form:"userProfile",enableReinitialize:!0,destroyOnUnmount:!1})(function(e){var t=e.pristine,a=e.submitting,n=e.handleSubmit,o=e.updateProfile;return r.a.createElement(w.a,null,r.a.createElement(Y.a,{dividing:!0,size:"large",content:"About Me"}),r.a.createElement("p",null,"Complete your profile to get the most out of this site"),r.a.createElement(ve.a,{onSubmit:n(o)},r.a.createElement(ve.a.Group,{inline:!0},r.a.createElement("label",null,"Tell us your status: "),r.a.createElement(be.a,{name:"status",component:He,type:"radio",value:"single",label:"Single"}),r.a.createElement(be.a,{name:"status",component:He,type:"radio",value:"relationship",label:"Relationship"}),r.a.createElement(be.a,{name:"status",component:He,type:"radio",value:"married",label:"Married"})),r.a.createElement(Pe.a,null),r.a.createElement("label",null,"Tell us about yourself"),r.a.createElement(be.a,{name:"about",component:ye,placeholder:"About Me"}),r.a.createElement(be.a,{name:"interests",component:Ke,options:Qe,value:"interests",multiple:!0,placeholder:"Select your interests"}),r.a.createElement(be.a,{width:8,name:"occupation",type:"text",component:Ge,placeholder:"Occupation"}),r.a.createElement(be.a,{width:8,name:"origin",options:{types:["(regions)"]},component:Be,placeholder:"Country of Origin"}),r.a.createElement(Pe.a,null),r.a.createElement(I.a,{disabled:t||a,size:"large",positive:!0,content:"Update Profile"})))}),Ze=a(422),$e=function(e){var t=e.setFiles,a=Object(n.useCallback)(function(e){t(e.map(function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}))},[t]),o=Object(Ze.a)({onDrop:a,multiple:!1,accept:"image/*"}),c=o.getRootProps,l=o.getInputProps,i=o.isDragActive;return r.a.createElement("div",Object.assign({},c(),{className:"dropzone "+(i&&"dropzone--isActive")}),r.a.createElement("input",l()),r.a.createElement(k.a,{name:"upload",size:"huge"}),r.a.createElement(Y.a,{content:"Drop image here"}))},Xe=a(410),et=a.n(Xe),tt=(a(722),function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).cropper=Object(n.createRef)(),a.cropImage=function(){var e=a.props.setImage;"undefined"!==typeof a.cropper.current.getCroppedCanvas()&&a.cropper.current.getCroppedCanvas().toBlob(function(t){e(t)},"image/jpeg")},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.imagePreview;return r.a.createElement(et.a,{ref:this.cropper,src:e,style:{height:200,width:"100%"},preview:".img-preview",aspectRatio:1,viewMode:1,dragMode:"move",guides:!1,scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:this.cropImage})}}]),t}(n.Component)),at=a(790),nt=function(e){var t,a=e.photos,o=e.profile,c=e.deletePhoto,l=e.setMainPhoto;return a&&(t=a.filter(function(e){return e.url!==o.photoURL})),r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,{sub:!0,color:"teal",content:"All Photos"}),r.a.createElement(at.a.Group,{itemsPerRow:5},r.a.createElement(at.a,null,r.a.createElement(S.a,{src:o.photoURL}),r.a.createElement(I.a,{positive:!0},"Main Photo")),a&&t.map(function(e){return r.a.createElement(at.a,{key:e.id},r.a.createElement(S.a,{src:e.url||"/assets/user.png"}),r.a.createElement("div",{className:"ui two buttons"},r.a.createElement(I.a,{onClick:function(){return l(e)},basic:!0,color:"green"},"Main"),r.a.createElement(I.a,{onClick:function(){return c(e)},basic:!0,icon:"trash",color:"red"})))})))},rt={uploadProfileImage:function(e,t){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c,l,i,s,u,m,p,d,h;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=r.getFirestore,l=Le()(),i=o(),s=c(),u=i.auth().currentUser,m="".concat(u.uid,"/user_images"),p={name:l},t.prev=7,a({type:"ASYNC_ACTION_START"}),t.next=11,i.uploadFile(m,e,null,p);case 11:return d=t.sent,t.next=14,d.uploadTaskSnapshot.ref.getDownloadURL();case 14:return h=t.sent,t.next=17,s.get("users/".concat(u.uid));case 17:if(t.sent.data().photoURL){t.next=23;break}return t.next=21,i.updateProfile({photoURL:h});case 21:return t.next=23,u.updateProfile({photoURL:h});case 23:return t.next=25,s.add({collection:"users",doc:u.uid,subcollections:[{collection:"photos"}]},{name:l,url:h});case 25:a({type:"ASYNC_ACTION_FINISH"}),t.next=32;break;case 28:t.prev=28,t.t0=t.catch(7),console.log(t.t0),a({type:"ASYNC_ACTION_ERROR"});case 32:case"end":return t.stop()}},t,null,[[7,28]])}));return function(e,a,n){return t.apply(this,arguments)}}()},deletePhoto:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c,l,i,s;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=r.getFirestore,l=o(),i=c(),s=l.auth().currentUser,t.prev=4,t.next=7,l.deleteFile("".concat(s.uid,"/user_images/").concat(e.name));case 7:return t.next=9,i.delete({collection:"users",doc:s.uid,subcollections:[{collection:"photos",doc:e.id}]});case 9:t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(4),console.log(t.t0),new Error("Problem deleting the photo");case 15:case"end":return t.stop()}},t,null,[[4,11]])}));return function(e,a,n){return t.apply(this,arguments)}}()},setMainPhoto:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=o(),t.prev=2,t.next=5,c.updateProfile({photoURL:e.url});case 5:return t.abrupt("return",t.sent);case 8:throw t.prev=8,t.t0=t.catch(2),console.log(t.t0),new Error("Problem setting main photo");case 12:case"end":return t.stop()}},t,null,[[2,8]])}));return function(e,a,n){return t.apply(this,arguments)}}()}},ot=Object(xe.compose)(Object(l.connect)(function(e){return{auth:e.firebase.auth,profile:e.firebase.profile,photos:e.firestore.ordered.photos,loading:e.async.loading}},rt),Object(g.firestoreConnect)(function(e){return[{collection:"users",doc:e.auth.uid,subcollections:[{collection:"photos"}],storeAs:"photos"}]}))(function(e){var t=e.uploadProfileImage,a=e.photos,o=e.profile,c=e.deletePhoto,l=e.setMainPhoto,s=e.loading,u=Object(n.useState)([]),m=Object(ue.a)(u,2),p=m[0],d=m[1],h=Object(n.useState)(""),E=Object(ue.a)(h,2),b=E[0],g=E[1],O=Object(n.useState)(null),j=Object(ue.a)(O,2),C=j[0],k=j[1];Object(n.useEffect)(function(){return function(){p.forEach(function(e){return URL.revokeObjectURL(e.preview)})}},[p,b]);var x=function(){var e=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(C,p[0].name);case 3:S(),i.toastr.success("Success","Photo has been uploaded"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),i.toastr.error("Oops","Something went wrong");case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),S=function(){d([]),k(null),g("")},L=function(){var e=Object(v.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i.toastr.error("Oops",e.t0.message);case 8:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(v.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i.toastr.error("Oops",e.t0.message);case 8:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(w.a,null,r.a.createElement(Y.a,{dividing:!0,size:"large",content:"Your Photos"}),r.a.createElement(y.a,null,r.a.createElement(y.a.Row,null),r.a.createElement(y.a.Column,{width:4},r.a.createElement(Y.a,{color:"teal",sub:!0,content:"Step 1 - Add Photo"}),r.a.createElement($e,{setFiles:d})),r.a.createElement(y.a.Column,{width:1}),r.a.createElement(y.a.Column,{width:4},r.a.createElement(Y.a,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),p.length>0&&r.a.createElement(tt,{setImage:k,imagePreview:p[0].preview})),r.a.createElement(y.a.Column,{width:1}),r.a.createElement(y.a.Column,{width:4},r.a.createElement(Y.a,{sub:!0,color:"teal",content:"Step 3 - Preview & Upload"}),p.length>0&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"img-preview",style:{minHeight:"200px",minWidth:"200px",overflow:"hidden"}}),r.a.createElement(I.a.Group,null,r.a.createElement(I.a,{loading:s,onClick:x,style:{width:"100px"},positive:!0,icon:"check"}),r.a.createElement(I.a,{disbaled:s,onClick:S,style:{width:"100px"},icon:"close"}))))),r.a.createElement(Pe.a,null),r.a.createElement(nt,{photos:a,profile:o,deletePhoto:L,setMainPhoto:A}))}),ct=a(42),lt=Object(ct.combineValidators)({newPassword1:Object(ct.isRequired)({message:"Please enter a password"}),newPassword2:Object(ct.composeValidators)(Object(ct.isRequired)({message:"Please confirm your new password"}),Object(ct.matchesField)("newPassword1")({message:"Passwords do not match"}))()}),it=Object(ge.a)({form:"account",validate:lt})(function(e){var t=e.error,a=e.invalid,n=e.submitting,o=e.handleSubmit,c=e.updatePassword,l=e.providerId;return r.a.createElement(w.a,null,r.a.createElement(Y.a,{dividing:!0,size:"large",content:"Account"}),l&&"password"===l&&r.a.createElement("div",null,r.a.createElement(Y.a,{color:"teal",sub:!0,content:"Change password"}),r.a.createElement("p",null,"Use this form to update your account settings"),r.a.createElement(ve.a,{onSubmit:o(c)},r.a.createElement(be.a,{width:8,name:"newPassword1",type:"password",pointing:"left",inline:!0,component:Ge,basic:!0,placeholder:"New Password"}),r.a.createElement(be.a,{width:8,name:"newPassword2",type:"password",inline:!0,basic:!0,pointing:"left",component:Ge,placeholder:"Confirm Password"}),t&&r.a.createElement(C.a,{basic:!0,color:"red"},t),r.a.createElement(Pe.a,null),r.a.createElement(I.a,{disabled:a||n,size:"large",positive:!0,content:"Update Password"}))),l&&"facebook.com"===l&&r.a.createElement("div",null,r.a.createElement(Y.a,{color:"teal",sub:!0,content:"Facebook Account"}),r.a.createElement("p",null,"Please visit Facebook to update your account settings"),r.a.createElement(I.a,{type:"button",color:"facebook"},r.a.createElement(k.a,{name:"facebook"}),"Go to Facebook")),l&&"google.com"===l&&r.a.createElement("div",null,r.a.createElement(Y.a,{color:"teal",sub:!0,content:"Google Account"}),r.a.createElement("p",null,"Please visit Google to update your account settings"),r.a.createElement(I.a,{type:"button",color:"google plus"},r.a.createElement(k.a,{name:"google plus"}),"Go to Google")))}),st=a(173),ut=a(79),mt={updatePassword:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c,l;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=o(),l=c.auth().currentUser,t.prev=3,t.next=6,l.updatePassword(e.newPassword1);case 6:return t.next=8,a(Object(ut.a)("account"));case 8:i.toastr.success("Success","Your passowrd has been updadted"),t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(3),new st.a({_error:t.t0.message});case 14:case"end":return t.stop()}},t,null,[[3,11]])}));return function(e,a,n){return t.apply(this,arguments)}}()},updateProfile:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c,l;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=o(),e.isLoaded,e.isEmpty,l=Object(Ie.a)(e,["isLoaded","isEmpty"]),t.prev=3,t.next=6,c.updateProfile(l);case 6:i.toastr.success("Success","Your profile has been updated"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0);case 12:case"end":return t.stop()}},t,null,[[3,9]])}));return function(e,a,n){return t.apply(this,arguments)}}()}},pt=Object(l.connect)(function(e){return{providerId:e.firebase.auth.providerData[0].providerId,user:e.firebase.profile}},mt)(function(e){var t=e.updatePassword,a=e.providerId,n=e.user,o=e.updateProfile;return r.a.createElement(y.a,null,r.a.createElement(y.a.Column,{width:12},r.a.createElement($.d,null,r.a.createElement($.a,{exact:!0,from:"/settings",to:"/settings/basic"}),r.a.createElement($.b,{path:"/settings/basic",render:function(){return r.a.createElement(qe,{initialValues:n,updateProfile:o})}}),r.a.createElement($.b,{path:"/settings/about",render:function(){return r.a.createElement(Je,{initialValues:n,updateProfile:o})}}),r.a.createElement($.b,{path:"/settings/photos",component:ot}),r.a.createElement($.b,{path:"/settings/account",render:function(){return r.a.createElement(it,{updatePassword:t,providerId:a})}}))),r.a.createElement(y.a.Column,{width:4},r.a.createElement(Te,null)))}),dt={createEvent:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c,l,s,u,m,p,d;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirestore,c=r.getFirebase,l=o(),s=c(),u=s.auth().currentUser,m=n().firebase.profile.photoURL,p=P(u,m,e),t.prev=6,t.next=9,l.add("events",p);case 9:return d=t.sent,t.next=12,l.set("event_attendee/".concat(d.id,"_").concat(u.uid),{eventId:d.id,userUid:u.uid,eventDate:e.date,host:!0});case 12:return i.toastr.success("Success!","Event has been created"),t.abrupt("return",d);case 16:t.prev=16,t.t0=t.catch(6),i.toastr.error("Oops","Something went wrong");case 19:case"end":return t.stop()}},t,null,[[6,16]])}));return function(e,a,n){return t.apply(this,arguments)}}()},updateEvent:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirestore,c=o(),t.prev=2,t.next=5,c.update("events/".concat(e.id),e);case 5:i.toastr.success("Success!","Event has been updated"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),i.toastr.error("Oops","Something went wrong");case 11:case"end":return t.stop()}},t,null,[[2,8]])}));return function(e,a,n){return t.apply(this,arguments)}}()},cancelToggle:function(e,t){return function(){var a=Object(v.a)(f.a.mark(function a(n,r,o){var c,l,s;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:c=o.getFirestore,l=c(),s=e?"Are you sure you want to cancel the event?":"This will reactivate the event, are you sure?";try{i.toastr.confirm(s,{onOk:function(){var a=Object(v.a)(f.a.mark(function a(){return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.update("events/".concat(t),{cancelled:e});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()})}catch(n){console.log(n)}case 4:case"end":return a.stop()}},a)}));return function(e,t,n){return a.apply(this,arguments)}}()}},ht=Object(ct.combineValidators)({title:Object(ct.isRequired)({message:"The event title is required"}),category:Object(ct.isRequired)({message:"The category is required"}),description:Object(ct.composeValidators)(Object(ct.isRequired)({message:"Please enter a description"}),Object(ct.hasLengthGreaterThan)(4)({message:"Description needs to be at least 5 characters"}))(),city:Object(ct.isRequired)("city"),venue:Object(ct.isRequired)("venue"),date:Object(ct.isRequired)("date")}),Et=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],ft=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={cityLatLng:{},venueLatLng:{}},a.onFormSubmit=function(){var e=Object(v.a)(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.venueLatLng=a.state.venueLatLng,e.prev=1,!a.props.initialValues.id){e.next=8;break}0===Object.keys(t.venueLatLng).length&&(t.venueLatLng=a.props.event.venueLatLng),a.props.updateEvent(t),a.props.history.push("/events/".concat(a.props.initialValues.id)),e.next=12;break;case 8:return e.next=10,a.props.createEvent(t);case 10:n=e.sent,a.props.history.push("/events/".concat(n.id));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t){return e.apply(this,arguments)}}(),a.handleCitySelect=function(e){Object(De.geocodeByAddress)(e).then(function(e){return Object(De.getLatLng)(e[0])}).then(function(e){a.setState({cityLatLng:e})}).then(function(){a.props.change("city",e)})},a.handleVenueSelect=function(e){Object(De.geocodeByAddress)(e).then(function(e){return Object(De.getLatLng)(e[0])}).then(function(e){a.setState({venueLatLng:e})}).then(function(){a.props.change("venue",e)})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark(function e(){var t,a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.firestore,n=t.match,e.next=3,a.setListener("events/".concat(n.params.id));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(v.a)(f.a.mark(function e(){var t,a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.firestore,n=t.match,e.next=3,a.unsetListener("events/".concat(n.params.id));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.history,a=e.initialValues,n=e.invalid,o=e.submitting,c=e.pristine,l=e.event,i=e.cancelToggle;return r.a.createElement(y.a,null,r.a.createElement(y.a.Column,{width:16},r.a.createElement(w.a,null,r.a.createElement(Y.a,{sub:!0,color:"teal",content:"Event Details"}),r.a.createElement(ve.a,{onSubmit:this.props.handleSubmit(this.onFormSubmit),autoComplete:"off"},r.a.createElement(be.a,{name:"title",component:Ge,placeholder:"Give your event a name"}),r.a.createElement(be.a,{name:"category",component:Ke,options:Et,placeholder:"What is your event about?"}),r.a.createElement(be.a,{name:"description",component:ye,rows:3,placeholder:"Tell us about your event"}),r.a.createElement(Y.a,{sub:!0,color:"teal",content:"Event Location Details"}),r.a.createElement(be.a,{name:"city",component:Be,options:{types:["(cities)"]},onSelect:this.handleCitySelect,placeholder:"Event City"}),r.a.createElement(be.a,{name:"venue",component:Be,options:{location:new google.maps.LatLng(this.state.cityLatLng),radius:1e3,types:["establishment"]},onSelect:this.handleVenueSelect,placeholder:"Event Venue"}),r.a.createElement(be.a,{name:"date",component:_e,dateFormat:"dd LLL yyyy h:mm a",showTimeSelect:!0,timeFormat:"HH:mm",placeholder:"Event Date"}),r.a.createElement(I.a,{disabled:n||o||c,positive:!0,type:"submit"},"Submit"),r.a.createElement(I.a,{onClick:a.id?function(){return t.push("/events/".concat(a.id))}:function(){return t.push("/events")},type:"button"},"Cancel"),r.a.createElement(I.a,{type:"button",color:l.cancelled?"green":"red",floated:"right",content:l.cancelled?"Reactivate event":"Cancel event",onClick:function(){return i(!l.cancelled,l.id)}})))))}}]),t}(n.Component),vt=Object(g.withFirestore)(Object(l.connect)(function(e,t){var a=t.match.params.id,n={};return e.firestore.ordered.events&&e.firestore.ordered.events.length>0&&(n=e.firestore.ordered.events.filter(function(e){return e.id===a})[0]||{}),{initialValues:n,event:n}},dt)(Object(ge.a)({form:"eventForm",validate:ht,enableReinitialize:!0})(ft))),bt=a(411),gt=a(231),yt=a.n(gt),Ot=function(e){var t,a=e.profile;return a.dateOfBirth&&(t=Object(bt.a)(Date.now(),a.dateOfBirth.toDate())),r.a.createElement(y.a.Column,{width:16},r.a.createElement(w.a,null,r.a.createElement(j.a.Group,null,r.a.createElement(j.a,null,r.a.createElement(yt.a,{height:150,placeholder:r.a.createElement(j.a.Image,{avatar:!0,size:"small",src:"/assets/user.png"})},r.a.createElement(j.a.Image,{avatar:!0,size:"small",src:a.photoURL||"/assets/user.png"})),r.a.createElement(j.a.Content,{horizontalalign:"left"},r.a.createElement(Y.a,{as:"h1"},a.displayName),r.a.createElement("br",null),r.a.createElement(Y.a,{as:"h3"},a.occupation,", ",t||"38 years"),r.a.createElement("br",null),r.a.createElement(Y.a,{as:"h3"}," ",a.city||"unknown city"))))))},wt=function(e){var t=e.isCurrentUser;return r.a.createElement(y.a.Column,{width:16},r.a.createElement(w.a,null,t?r.a.createElement(I.a,{as:L.b,to:"/settings",color:"teal",fluid:!0,basic:!0,content:"Edit Profile"}):r.a.createElement(I.a,{color:"teal",fluid:!0,basic:!0,content:"Follow user"})))},jt=function(e){var t=e.photos;return r.a.createElement(y.a.Column,{width:16},r.a.createElement(w.a,{attached:!0},r.a.createElement(Y.a,{icon:"image",content:"Photos"}),r.a.createElement(S.a.Group,{size:"small",style:{marginLeft:20}},t&&t.map(function(e){return r.a.createElement(yt.a,{key:e.id,height:150,placeholder:r.a.createElement(S.a,{src:"/assets/user.png"})},r.a.createElement(S.a,{src:e.url,style:{padding:0}}))}))))},Ct=function(){return r.a.createElement(y.a.Column,{width:16},r.a.createElement(w.a,{attached:!0},r.a.createElement(Y.a,{icon:"calendar",content:"Events"}),r.a.createElement(J.a,{secondary:!0,pointing:!0,style:{padding:0}},r.a.createElement(J.a.Item,{name:"All Events",active:!0}),r.a.createElement(J.a.Item,{name:"Past Events"}),r.a.createElement(J.a.Item,{name:"Events Hosted"})),r.a.createElement(at.a.Group,{itemsPerRow:3,style:{marginLeft:0}},r.a.createElement(at.a,{style:{marginRight:10}},r.a.createElement(S.a,{src:"/assets/categoryImages/drinks.jpg"}),r.a.createElement(at.a.Content,null,r.a.createElement(at.a.Header,{textAlign:"center"},"Event Title"),r.a.createElement(at.a.Meta,{textAlign:"center"},"28th March 2018 at 10:00 PM"))),r.a.createElement(at.a,null,r.a.createElement(S.a,{src:"/assets/categoryImages/drinks.jpg"}),r.a.createElement(at.a.Content,null,r.a.createElement(at.a.Header,{textAlign:"center"},"Event Title"),r.a.createElement(at.a.Meta,{textAlign:"center"},"28th March 2018 at 10:00 PM"))),r.a.createElement(at.a,{style:{marginLeft:10}},r.a.createElement(S.a,{src:"/assets/categoryImages/drinks.jpg"}),r.a.createElement(at.a.Content,null,r.a.createElement(at.a.Header,{textAlign:"center"},"Event Title"),r.a.createElement(at.a.Meta,{textAlign:"center"},"28th March 2018 at 10:00 PM"))))))},kt=function(e){var t=e.profile;return r.a.createElement(y.a.Column,{width:16},r.a.createElement(w.a,null,r.a.createElement(y.a,{columns:2},r.a.createElement(y.a.Column,{width:8},r.a.createElement(Y.a,{icon:"smile",content:"About"}),r.a.createElement("p",null,"I am a: ",r.a.createElement("strong",null,t.occupation||"tbn")),r.a.createElement("p",null,"Originally from ",r.a.createElement("strong",null,t.origin||"tbn")),r.a.createElement("p",null,"Member Since:"," ",r.a.createElement("strong",null,t.createdAt&&Object(R.default)(t.createdAt.toDate(),"dd LLL yyyy"))),r.a.createElement("p",null,t.description)),r.a.createElement(y.a.Column,{width:8},r.a.createElement(Y.a,{icon:"heart outline",content:"Interests"}),r.a.createElement(x.a,null,t.interests?t.interests.map(function(e,t){return r.a.createElement(j.a,{key:t},r.a.createElement(k.a,{name:"heart",style:{paddingLeft:7}}),r.a.createElement(j.a.Content,null,e))}):r.a.createElement("p",null,"No interests"))))))},xt={getUserEvents:function(e,t){return function(){var a=Object(v.a)(f.a.mark(function a(n,r){var o,c,l,i,s,u,m,p;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n({type:"ASYNC_ACTION_START"}),o=G.firestore(),c=new Date,l=o.collection("event_attendee"),a.t0=t,a.next=1===a.t0?7:2===a.t0?9:3===a.t0?11:13;break;case 7:return i=l.where("userUid","==",e).where("eventDate","<=",c).orderBy("eventDate","desc"),a.abrupt("break",15);case 9:return i=l.where("userUid","==",e).where("eventDate",">=",c).orderBy("eventDate"),a.abrupt("break",15);case 11:return i=l.where("userUid","==",e).where("host","==",!0).orderBy("eventDate","desc"),a.abrupt("break",15);case 13:return i=l.where("userUid","==",e).orderBy("eventDate","desc"),a.abrupt("break",15);case 15:return a.prev=15,a.next=18,i.get();case 18:s=a.sent,u=[],m=0;case 21:if(!(m<s.docs.length)){a.next=29;break}return a.next=24,o.collection("events").doc(s.docs[m].data().eventId).get();case 24:p=a.sent,u.push(Object(F.a)({},p.data(),{id:p.id}));case 26:m++,a.next=21;break;case 29:n({type:"FETCH_EVENTS",payload:{events:u}}),n({type:"ASYNC_ACTION_FINISH"}),a.next=37;break;case 33:a.prev=33,a.t1=a.catch(15),console.log(a.t1),n({type:"ASYNC_ACTION_ERROR"});case 37:case"end":return a.stop()}},a,null,[[15,33]])}));return function(e,t){return a.apply(this,arguments)}}()}},It=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getUserEvents(this.props.userUid,1);case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.profile,a=e.photos,n=e.auth,o=e.match,c=e.requesting,l=n.uid===o.params.id;return Object.values(c).some(function(e){return!0===e})?r.a.createElement(V,null):r.a.createElement(y.a,null,r.a.createElement(Ot,{profile:t}),r.a.createElement(kt,{profile:t}),r.a.createElement(wt,{isCurrentuser:l}),a&&r.a.createElement(jt,{photos:a}),r.a.createElement(Ct,null))}}]),t}(n.Component),St=Object(l.connect)(function(e,t){var a=null,n={};return t.match.params.id===e.auth.uid?n=e.firebase.profile:(n=!Object(g.isEmpty)(e.firestore.ordered.profile)&&e.firestore.ordered.profile[0],a=t.match.params.id),{profile:n,userUid:a,auth:e.firebase.auth,photos:e.firestore.ordered.photos,requesting:e.firestore.status.requesting}},xt)(Object(g.firestoreConnect)(function(e,t){return function(e){var t=e.auth,a=e.userUid;return null!==a?[{collection:"users",doc:a,storeAs:"profile"},{collection:"users",doc:a,subcollections:[{collection:"photos"}],storeAs:"photos"}]:[{collection:"users",doc:t.uid,subcollections:[{collection:"photos"}],storeAs:"photos"}]}(e)})(It)),Lt=function(e){var t=e.history;return r.a.createElement(w.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead"},r.a.createElement(Z.a,{text:!0},r.a.createElement("a",{href:"https://www.inblockdesign.com/index.html"},r.a.createElement(I.a,{style:{marginLeft:0,marginBottom:200},size:"huge",inverted:!0},r.a.createElement(k.a,{style:{marginLeft:15},name:"home",size:"large"}))," "),r.a.createElement(Y.a,{as:"h1",inverted:!0,style:{marginBottom:0}},r.a.createElement(S.a,{size:"massive",src:"/assets/logo3.png",alt:"logo",style:{marginBottom:15}}),"SocialCode"),r.a.createElement(Y.a,{as:"h2",inverted:!0,style:{marginTop:0,fontWeight:50}},"Find friends who like to code"),r.a.createElement(I.a,{style:{marginTop:50},onClick:function(){return t.push("/events")},size:"huge",inverted:!0},"Get Started",r.a.createElement(k.a,{name:"right arrow"}))))},At=function(e){return new Promise(function(t){return setTimeout(t,e)})},Rt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState({address:e})},a.handleSelect=function(e){Object(De.geocodeByAddress)(e).then(function(e){return Object(De.getLatLng)(e[0])}).then(function(e){return console.log("Success",e)}).catch(function(e){return console.error("Error",e)})},a.state={address:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.selectAddress;return r.a.createElement(ze.a,{value:this.state.address,onChange:this.handleChange,onSelect:e},function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,o=e.loading;return r.a.createElement("div",null,r.a.createElement("input",t({placeholder:"Search Places ...",className:"location-search-input"})),r.a.createElement("div",{className:"autocomplete-dropdown-container"},o&&r.a.createElement("div",null,"Loading..."),a.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",n(e,{className:t,style:a}),r.a.createElement("span",null,e.description))})))})}}]),t}(r.a.Component),Nt=function(){return r.a.createElement(k.a,{name:"marker",size:"big",color:"red"})},Ft=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.latlng;return r.a.createElement("div",{style:{height:"300px",width:"100%"}},r.a.createElement(pe.a,{bootstrapURLKeys:{key:"AIzaSyDIpgc0n_n_YzK7f4S1wJqB3_Rk5CPhQIQ"},defaultCenter:e,defaultZoom:this.props.zoom},r.a.createElement(Nt,{lat:e.lat,lng:e.lng})))}}]),t}(n.Component);Ft.defaultProps={zoom:11};var Tt=Ft,Pt={incrementAsync:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ASYNC_ACTION_START",payload:e}),t.next=3,At(1e3);case 3:a({type:"INCREMENT_COUNTER"}),a({type:"ASYNC_ACTION_FINISH"});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},decrementAsync:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ASYNC_ACTION_START",payload:e}),t.next=3,At(1e3);case 3:a({type:"DECREMENT_COUNTER"}),a({type:"ASYNC_ACTION_FINISH"});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},openModal:ae},Ut=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={latlng:{lat:59.95,lng:30.33}},a.handleSelect=function(e){Object(De.geocodeByAddress)(e).then(function(e){return Object(De.getLatLng)(e[0])}).then(function(e){a.setState({latlng:e})}).catch(function(e){return console.error("Error",e)})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.incrementAsync,n=e.decrementAsync,o=e.openModal,c=e.loading,l=e.buttonName;return r.a.createElement("div",null,r.a.createElement("h1",null,"Test Component"),r.a.createElement("h3",null,"The answer is: ",t),r.a.createElement(I.a,{name:"increment",loading:"increment"===l&&c,onClick:function(e){return a(e.target.name)},positive:!0,content:"Increment"}),r.a.createElement(I.a,{name:"decrement",loading:"decrement"===l&&c,onClick:function(e){return n(e.target.name)},negative:!0,content:"Decrement"}),r.a.createElement(I.a,{onClick:function(){return o("TestModal",{data:42})},color:"teal",content:"Open Modal"}),r.a.createElement("br",null),r.a.createElement(Rt,{selectAddress:this.handleSelect}),r.a.createElement(Tt,{key:this.state.latlng.lng,latlng:this.state.latlng}))}}]),t}(n.Component),Mt=Object(l.connect)(function(e){return{data:e.test.data,loading:e.async.loading,buttonName:e.async.elementName}},Pt)(Ut),_t=a(785),Dt={closeModal:ne},zt=Object(l.connect)(null,Dt)(function(e){var t=e.closeModal;return r.a.createElement(_t.a,{closeIcon:"close",open:!0,onClose:t},r.a.createElement(_t.a.Header,null,"Test Modal"),r.a.createElement(_t.a.Content,null,r.a.createElement(_t.a.Description,null,r.a.createElement("p",null,"Test Modal... nothing to see here"))))}),Bt=function(e){var t=e.socialLogin;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(I.a,{onClick:function(){return t("facebook")},type:"button",style:{marginBottom:"10px"},fluid:!0,color:"facebook"},r.a.createElement(k.a,{name:"facebook"}),"Login with Facebook"),r.a.createElement(I.a,{onClick:function(){return t("google")},type:"button",fluid:!0,color:"google plus"},r.a.createElement(k.a,{name:"google plus"}),"Login with Google")))},Gt={login:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=o(),t.prev=2,t.next=5,c.auth().signInWithEmailAndPassword(e.email,e.password);case 5:a({type:"MODAL_CLOSE"}),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(2),console.log(t.t0),new st.a({_error:t.t0.message});case 12:case"end":return t.stop()}},t,null,[[2,8]])}));return function(e,a,n){return t.apply(this,arguments)}}()},socialLogin:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c,l,i,s;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=r.getFirestore,l=o(),i=c(),t.prev=3,a({type:"MODAL_CLOSE"}),t.next=7,l.login({provider:e,type:"popup"});case 7:if(!(s=t.sent).additionalUserInfo.isNewUser){t.next=11;break}return t.next=11,i.set("users/".concat(s.user.uid),{displayName:s.profile.displayName,photoURL:s.profile.avatarUrl,createdAt:i.FieldValue.serverTimestamp()});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0);case 16:case"end":return t.stop()}},t,null,[[3,13]])}));return function(e,a,n){return t.apply(this,arguments)}}()}},Ht=Object(l.connect)(null,Gt)(Object(ge.a)({form:"loginForm"})(function(e){var t=e.login,a=e.handleSubmit,n=e.error,o=e.socialLogin;return r.a.createElement(ve.a,{size:"large",onSubmit:a(t),autoComplete:"off"},r.a.createElement(w.a,null,r.a.createElement(be.a,{name:"email",component:Ge,type:"text",placeholder:"Email Address"}),r.a.createElement(be.a,{name:"password",component:Ge,type:"password",placeholder:"password"}),n&&r.a.createElement(C.a,{basic:!0,color:"red"},n),r.a.createElement(I.a,{fluid:!0,size:"large",color:"teal"},"Login"),r.a.createElement(Pe.a,{horizontal:!0},"Or"),r.a.createElement(Bt,{socialLogin:o})))})),Vt={closeModal:ne},Yt=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(_t.a,{size:"mini",open:!0,onClose:this.props.closeModal},r.a.createElement(_t.a.Header,null,"Login to Re-vents"),r.a.createElement(_t.a.Content,null,r.a.createElement(_t.a.Description,null,r.a.createElement(Ht,null))))}}]),t}(n.Component),qt=Object(l.connect)(null,Vt)(Yt),Wt={registerUser:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a,n,r){var o,c,l,i,s,u;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirebase,c=r.getFirestore,l=o(),i=c(),t.prev=3,t.next=6,l.auth().createUserWithEmailAndPassword(e.email,e.password);case 6:return s=t.sent,console.log(s),t.next=10,s.user.updateProfile({displayName:e.displayName});case 10:return u={displayName:e.displayName,createdAt:i.FieldValue.serverTimestamp()},t.next=13,i.set("users/".concat(s.user.uid),Object(F.a)({},u));case 13:a({type:"MODAL_CLOSE"}),t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(3),console.log(t.t0),new st.a({_error:t.t0.message});case 20:case"end":return t.stop()}},t,null,[[3,16]])}));return function(e,a,n){return t.apply(this,arguments)}}()}},Kt=Object(ct.combineValidators)({displayName:Object(ct.isRequired)("displayName"),email:Object(ct.isRequired)("email"),password:Object(ct.isRequired)("password")}),Qt=Object(l.connect)(null,Wt)(Object(ge.a)({form:"registerForm",validate:Kt})(function(e){var t=e.handleSubmit,a=e.registerUser,n=e.error,o=e.invalid,c=e.submitting;return r.a.createElement("div",null,r.a.createElement(ve.a,{size:"large",onSubmit:t(a),autoComplete:"off"},r.a.createElement(w.a,null,r.a.createElement(be.a,{name:"displayName",type:"text",component:Ge,placeholder:"Known As"}),r.a.createElement(be.a,{name:"email",type:"text",component:Ge,placeholder:"Email"}),r.a.createElement(be.a,{name:"password",type:"password",component:Ge,placeholder:"Password"}),n&&r.a.createElement(C.a,{basic:!0,color:"red"},n),r.a.createElement(I.a,{disabled:o||c,fluid:!0,size:"large",color:"teal"},"Register"),r.a.createElement(Pe.a,{horizontal:!0},"Or"),r.a.createElement(Bt,null))))})),Jt={closeModal:ne},Zt=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(_t.a,{size:"mini",open:!0,onClose:this.props.closeModal},r.a.createElement(_t.a.Header,null,"Sign Up to Re-vents!"),r.a.createElement(_t.a.Content,null,r.a.createElement(_t.a.Description,null,r.a.createElement(Qt,null))))}}]),t}(n.Component),$t={TestModal:zt,LoginModal:qt,RegisterModal:Object(l.connect)(null,Jt)(Zt)},Xt=Object(l.connect)(function(e){return{currentModal:e.modals}})(function(e){var t,a=e.currentModal;if(a){var n=a.modalType,o=a.modalProps,c=$t[n];t=r.a.createElement(c,o)}return r.a.createElement("span",null,t)}),ea=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement(Xt,null),r.a.createElement($.b,{exact:!0,path:"/",component:Lt}),r.a.createElement($.b,{path:"/(.+)",render:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(ce,null),r.a.createElement(Z.a,{className:"main"},r.a.createElement($.d,{key:e.props.location.key},r.a.createElement($.b,{exact:!0,path:"/events",component:Q}),r.a.createElement($.b,{path:"/events/:id",component:Ne}),r.a.createElement($.b,{path:"/people",component:Fe}),r.a.createElement($.b,{path:"/profile/:id",component:St}),r.a.createElement($.b,{path:"/settings",component:pt}),r.a.createElement($.b,{path:["/createEvent","/manage/:id"],component:vt}),r.a.createElement($.b,{path:"/test",component:Mt}))))}}))}}]),t}(n.Component),ta=Object($.g)(ea);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var aa,na,ra,oa,ca,la=a(177),ia=a(420),sa=a(397),ua=function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0,r=n.type,o=n.payload,c=t[r];return c?c(a,o):a}},ma=ua({data:42},(aa={},Object(N.a)(aa,"INCREMENT_COUNTER",function(e){return Object(F.a)({},e,{data:e.data+1})}),Object(N.a)(aa,"DECREMENT_COUNTER",function(e){return Object(F.a)({},e,{data:e.data-1})}),aa)),pa=ua([],(na={},Object(N.a)(na,"CREATE_EVENT",function(e,t){return[].concat(Object(b.a)(e),[t.event])}),Object(N.a)(na,"UPDATE_EVENT",function(e,t){return[].concat(Object(b.a)(e.filter(function(e){return e.id!==t.event.id})),[t.event])}),Object(N.a)(na,"DELETE_EVENT",function(e,t){return Object(b.a)(e.filter(function(e){return e.id!==t.eventId}))}),Object(N.a)(na,"FETCH_EVENTS",function(e,t){return t.events}),na)),da=ua(null,(ra={},Object(N.a)(ra,"MODAL_OPEN",function(e,t){return{modalType:t.modalType,modalProps:t.modalProps}}),Object(N.a)(ra,"MODAL_CLOSE",function(e){return null}),ra)),ha=ua({authenticated:!1,currentUser:null},(oa={},Object(N.a)(oa,"LOGIN_USER",function(e,t){return{authenticated:!0,currentUser:t.creds.email}}),Object(N.a)(oa,"SIGN_OUT_USER",function(){return{authenticated:!1,currentUser:null}}),oa)),Ea=ua({loading:!1,elementName:null},(ca={},Object(N.a)(ca,"ASYNC_ACTION_START",function(e,t){return Object(F.a)({},e,{loading:!0,elementName:t})}),Object(N.a)(ca,"ASYNC_ACTION_FINISH",function(e){return Object(F.a)({},e,{loading:!1,elementName:null})}),Object(N.a)(ca,"ASYNC_ACTION_ERROR",function(e){return Object(F.a)({},e,{loading:!1,elementName:null})}),ca)),fa=Object(xe.combineReducers)({firebase:g.firebaseReducer,firestore:la.firestoreReducer,form:sa.a,test:ma,events:pa,modals:da,auth:ha,async:Ea,toastr:i.reducer}),va=a(421),ba={userProfile:"users",attachAuthIsReady:!0,useFirestoreForProfile:!0,updateProfileOnLogin:!1},ga=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(n.Component),ya=Object($.g)(ga),Oa=function(){var e=[va.a.withExtraArgument({getFirebase:g.getFirebase,getFirestore:la.getFirestore})],t=Object(ia.composeWithDevTools)(xe.applyMiddleware.apply(void 0,e),Object(g.reactReduxFirebase)(G,ba),Object(la.reduxFirestore)(G));return Object(xe.createStore)(fa,t)}(),wa=document.getElementById("root");Oa.firebaseAuthIsReady.then(function(){c.a.render(r.a.createElement(l.Provider,{store:Oa},r.a.createElement(L.a,null,r.a.createElement(ya,null,r.a.createElement(s.a,{position:"bottom-right",transitionIn:"fadeIn",transitionOut:"fadeOut"}),r.a.createElement(ta,null)))),wa)}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[458,1,2]]]);
//# sourceMappingURL=main.0493819b.chunk.js.map